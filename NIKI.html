<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∏–∫–Ω–µ–π–º–æ–≤ - React</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const adjectives = [
            '–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–π',
            '–õ–∞–∑—É—Ä–Ω—ã–π',
            '–¢–∏—Ö–∏–π',
            '–ñ–µ–ª–µ–∑–Ω—ã–π',
            '–í–µ—Å—ë–ª—ã–π',
            '–ì—Ä–æ–∑–Ω—ã–π',
            '–°–º–µ–ª—ã–π',
            '–ù–æ—á–Ω–æ–π',
            '–°–æ–ª–Ω–µ—á–Ω—ã–π',
            '–ó–≤—ë–∑–¥–Ω—ã–π',
            '–õ–µ–¥—è–Ω–æ–π',
            '–ü–ª–∞–º–µ–Ω–Ω—ã–π',
            '–ú—É–¥—Ä—ã–π',
            '–ë—ã—Å—Ç—Ä—ã–π',
            '–°–∏–ª—å–Ω—ã–π',
            '–î–∏–∫–∏–π',
            '–í–µ—Ä–Ω—ã–π',
            '–ß–µ—Å—Ç–Ω—ã–π',
            '–ì–æ—Ä–¥—ã–π',
            '–°–≤–æ–±–æ–¥–Ω—ã–π'
        ];

        const nouns = [
            '–¢–∏–≥—Ä',
            '–ü–∏—Ç–æ–Ω',
            '–®—Ç–æ—Ä–º',
            '–†—ã—Ü–∞—Ä—å',
            '–ì–µ–ø–∞—Ä–¥',
            '–Ø—Å—Ç—Ä–µ–±',
            '–í–æ–ª–∫',
            '–û—Ä—ë–ª',
            '–õ–µ–≤',
            '–§–µ–Ω–∏–∫—Å',
            '–î—Ä–∞–∫–æ–Ω',
            '–ö–æ—Ç',
            '–°–æ–∫–æ–ª',
            '–ú–µ–¥–≤–µ–¥—å',
            '–õ–∏—Å–∞',
            '–ê–∫—É–ª–∞',
            '–ó–º–µ—è',
            '–ù–æ–∫—Å',
            '–ö—Ä–æ–≤—å',
            '–¢–µ–Ω—å'
        ];

        function getRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function NicknameGenerator() {
            const [nickname, setNickname] = useState('');
            const [history, setHistory] = useState([]);
            const [notification, setNotification] = useState('');

            const generateNickname = () => {
                const newNickname = `${getRandom(adjectives)}${getRandom(nouns)}`;
                setNickname(newNickname);
                setNotification('');

                setHistory(prevHistory => {
                    if (prevHistory.length > 0 && prevHistory[0] === newNickname) {
                        return prevHistory;
                    }
                    const newHistory = [newNickname, ...prevHistory];
                    return newHistory.slice(0, 10);
                });
            };

            const copyToClipboard = () => {
                if (!nickname) return;

                navigator.clipboard.writeText(nickname).then(() => {
                    setNotification('‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                    setTimeout(() => setNotification(''), 2000);
                }).catch(() => {
                    const textarea = document.createElement('textarea');
                    textarea.value = nickname;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);

                    setNotification('‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                    setTimeout(() => setNotification(''), 2000);
                });
            };

            const selectFromHistory = (selectedNickname) => {
                setNickname(selectedNickname);
                setNotification('');
            };

            return (
                <div className="container">
                    <h1>üé≠ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ù–∏–∫–Ω–µ–π–º–æ–≤</h1>

                    <div className="generator-section">
                        <div className={`nickname-display ${nickname ? '' : 'empty'}`}>
                            {nickname || '–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ'}
                        </div>

                        <div className="button-group">
                            <button className="btn-generate" onClick={generateNickname}>
                                –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∏–∫–Ω–µ–π–º
                            </button>
                            <button 
                                className="btn-copy" 
                                onClick={copyToClipboard} 
                                disabled={!nickname}
                            >
                                –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                        </div>

                        <div className="notification">
                            {notification}
                        </div>
                    </div>

                    <div className="history-section">
                        <div className="history-title">üìã –ò—Å—Ç–æ—Ä–∏—è</div>
                        <div className="history-list">
                            {history.length === 0 ? (
                                <div className="empty-message">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>
                            ) : (
                                history.map((item, index) => (
                                    <div 
                                        key={index}
                                        className="history-item"
                                        onClick={() => selectFromHistory(item)}
                                        title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞"
                                    >
                                        {item}
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<NicknameGenerator />, document.getElementById('root'));
    </script>
</body>
</html>
